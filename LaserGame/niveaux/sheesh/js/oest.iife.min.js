var g=Object.defineProperty;var T=(f,s,h)=>s in f?g(f,s,{enumerable:!0,configurable:!0,writable:!0,value:h}):f[s]=h;var M=(f,s,h)=>(T(f,typeof s!="symbol"?s+"":s,h),h);var GLOBAL_SN_OEST=function(){"use strict";const f=()=>{const e={Math:{},DS:{},Type:{}};return e.Type.TypeUtil=function(){throw new Error("$System.Type.TypeUtil is a static class.")},e.Type.TypeUtil.isString=function(t){return typeof t=="string"||typeof t=="object"&&t instanceof String},e.Type.TypeUtil.isDate=function(t){return typeof t=="object"&&t instanceof Date},e.Type.TypeUtil.isRegExp=function(t){return typeof t=="object"&&t instanceof RegExp},e.Type.TypeUtil.isArray=function(t){return typeof t=="object"&&t instanceof Array},e.Type.TypeUtil.isNumber=function(t){return!isNaN(t)},e.Type.TypeUtil.isBoolean=function(t){return typeof t=="boolean"||typeof t=="object"&&t instanceof Boolean},e.Type.TypeUtil.isFunction=function(t){return typeof t=="function"||typeof t=="object"&&t instanceof Function},e.Type.TypeUtil.isInteger=function(t){return e.Type.TypeUtil.isNumber(t)&&Math.round(t)==t},e.Type.TypeUtil.isFloat=function(t){return e.Type.TypeUtil.isString(t)?!1:e.Type.TypeUtil.isNumber(t)&&Math.round(t)!=t},e.Type.TypeUtil.isError=function(t){return typeof t=="object"&&t instanceof Error},e.DS.HashTable=function(){this.o={};for(key in this.o)delete this.o[key];this.size=0},e.DS.HashTable.prototype.getSize=function(){return this.size},e.DS.HashTable.prototype.set=e.DS.HashTable.prototype.add=function(t,n){t in this.o||this.size++,this.o[t]={v:n}},e.DS.HashTable.prototype.get=function(t){return t in this.o?this.o[t].v:null},e.DS.HashTable.prototype.hasThisKey=function(t){return t in this.o},e.DS.HashTable.prototype.getKeyListByValue=function(t){const n=[];for(key in this.o)this.o[key].v==t&&n.push(key);return n},e.DS.HashTable.prototype.remove=function(t){t in this.o&&(this.size--,delete this.o[t].v,delete this.o[t])},e.DS.HashTable.prototype.removeAll=function(){for(key in this.o)delete this.o[key].v,delete this.o[key];this.size=0},e.DS.HashTable.prototype.getO=function(){return this.o},e.DS.HashTable.prototype.join=function(t,n){const i=[];for(key in this.o)i.push(key+t+this.get(key));return i.join(n)},e.DS.HashTable.dispose=function(t){t.dispose(),t=null},e.DS.HashTable.prototype.dispose=function(){this.removeAll()},e.Math.IntUtil=function(){throw new Error("$System.Math.IntUtil is a static class.")},e.Math.IntUtil.dec2Bin=function(t){return t.toString(2)},e.Math.IntUtil.hexNumArray=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],e.Math.IntUtil.dec2Hex=function(t){return t.toString(16).toUpperCase()},e.Math.IntUtil.numHexArray={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",A:"10",B:"11",C:"12",D:"13",E:"14",F:"15"},e.Math.IntUtil.hex2Dec=function(t){return parseInt(t,16)},e.Math.IntUtil.bin2Dec=function(t){return parseInt(t,2)},e.Math.IntUtil.binHexArray={"0000":"0","0001":"1","0010":"2","0011":"3","0100":"4","0101":"5","0110":"6","0111":"7",1e3:"8",1001:"9",1010:"A",1011:"B",1100:"C",1101:"D",1110:"E",1111:"F"},e.Math.IntUtil.bin2Hex=function(t){let n=0;for(;t.charAt(n)=="0";)n++;n>0&&(t=t.substring(n,t.length));let i,o=[],r=e.Math.IntUtil.binHexArray,l=t.length;for(i=l;i>3;i=i-4)o.push(r[t.substring(i-4,i)]);return o.push(r[e.Math.IntUtil.fillZero(t.substring(i-4,i),4)]),o.reverse().join("")},e.Math.IntUtil.hexBinArray={0:"0000",1:"0001",2:"0010",3:"0011",4:"0100",5:"0101",6:"0110",7:"0111",8:"1000",9:"1001",A:"1010",B:"1011",C:"1100",D:"1101",E:"1110",F:"1111"},e.Math.IntUtil.hex2Bin=function(t){let n=0;for(;t.charAt(n)=="0";)n++;n>0&&(t=t.substring(n,t.length));const i=t.split(""),o=i.length,r=[],l=e.Math.IntUtil.hexBinArray;for(let a=0;a<o;a++)r.push(l[i[a]]);return r.join("")},e.Math.IntUtil.fillZero=function(t,n,i){if(t==""&&!i)return"";const o=n-t.length;let r="";for(let l=0;l<o;l++)r="0"+r;return r+t},e.Math.IntUtil.__GUIDPool=new e.DS.HashTable,e.Math.IntUtil.__GUIDCheckAndAdd=function(t){return e.Math.IntUtil.__GUIDPool.hasThisKey(t)?!1:(e.Math.IntUtil.__GUIDPool.set(t,!0),!0)},e.Math.IntUtil.genGUIDV4=function(){let t=e.Math.IntUtil.dec2Hex(Math.floor(Math.random()*(e.Math.IntUtil.hex2Dec("FFFFFFFF")+1))),n=e.Math.IntUtil.dec2Hex(Math.floor(Math.random()*65536));const i=e.Math.IntUtil.fillZero(e.Math.IntUtil.dec2Bin(Math.floor(Math.random()*65536)),16);let o=e.Math.IntUtil.bin2Hex(i.substr(0,12)+"0100");const r=e.Math.IntUtil.fillZero(e.Math.IntUtil.dec2Bin(Math.floor(Math.random()*256)));let l=e.Math.IntUtil.bin2Hex(r.substr(0,5)+"01"+r.substr(7,1)),a=e.Math.IntUtil.dec2Hex(Math.floor(Math.random()*256)),u=e.Math.IntUtil.dec2Hex(Math.floor(Math.random()*(e.Math.IntUtil.hex2Dec("FFFFFFFFFFFF")+1)));t=e.Math.IntUtil.fillZero(t,8),n=e.Math.IntUtil.fillZero(n,4),o=e.Math.IntUtil.fillZero(o,4),l=e.Math.IntUtil.fillZero(l,2),a=e.Math.IntUtil.fillZero(a,2),u=e.Math.IntUtil.fillZero(u,12);const U=t+"_"+n+"_"+o+"_"+l+a+"_"+u;return e.Math.IntUtil.__GUIDCheckAndAdd(U)?U:e.Math.IntUtil.genGUIDV4()},e.Math.IntUtil.fillRnd=function(t,n,i){if(t==""&&!i)return"";c=n-t.length;let o="";return c>0&&(o=e.Math.IntUtil.dec2Hex(Math.floor(Math.random()*(e.Math.IntUtil.hex2Dec("FFFFFFFFFFFF")+1))),o=o.substring(0,c)),o+t},e.Math.IntUtil.genGUID=function(){let t=e.Math.IntUtil.dec2Hex(Math.floor(Math.random()*(e.Math.IntUtil.hex2Dec("FFFFFFFF")+1))),n=e.Math.IntUtil.dec2Hex(Math.floor(Math.random()*65536));const i=e.Math.IntUtil.fillZero(e.Math.IntUtil.dec2Bin(Math.floor(Math.random()*65536)),16);let o=e.Math.IntUtil.bin2Hex(i.substr(0,12)+"0100");const r=e.Math.IntUtil.fillZero(e.Math.IntUtil.dec2Bin(Math.floor(Math.random()*256)));let l=e.Math.IntUtil.bin2Hex(r.substr(0,5)+"01"+r.substr(7,1)),a=e.Math.IntUtil.dec2Hex(Math.floor(Math.random()*256)),u=e.Math.IntUtil.dec2Hex(Math.floor(Math.random()*1e12));t=e.Math.IntUtil.fillZero(t,8),n=e.Math.IntUtil.fillZero(n,4),o=e.Math.IntUtil.fillZero(o,4),l=e.Math.IntUtil.fillZero(l,2),a=e.Math.IntUtil.fillZero(a,2),u=e.Math.IntUtil.fillRnd(u,12);const U=u+"_"+n+"_"+o+"_"+l+a+"_"+t;return e.Math.IntUtil.__GUIDCheckAndAdd(U)?U:e.Math.IntUtil.genGUID()},e.Math.IntUtil.genGUIDV4()};function s(e){try{var t=atob(e);if(t.includes("|")){var n=t.replace(/\|\d+\|/,"");return n}return t}catch(i){return e}}const h="__snOest",I=400*24*60*60*1e3,y="cookieId",p="GLOBAL_SN_OEST";class d{constructor(){M(this,"_options",{ssrOest:"",baseUrl:"",needBff:!1,bffEnv:""});M(this,"value","");M(this,"generateUuid",()=>{let t="";try{t=f(),t=t.replace(/-/g,"_").toUpperCase()}catch(n){console.error("Error generating UUID:",n)}return t});if(typeof window!="undefined"&&window[p])return window[p];typeof window!="undefined"&&(window[p]=this)}getCookie(t){const i=("; "+document.cookie).split("; "+t+"=");if(i.length>=2)return decodeURIComponent(i.pop().split(";").shift())}updateLocalStorage(t){var n;(n=window.localStorage)!=null&&n.setItem&&window.localStorage.setItem(h,JSON.stringify({value:t,expires:Date.now()+I}))}init(t){var n;try{this._options=t;const{ssrOest:i=""}=t,o=this.getCookie(y)||"";let r=o,l={value:"",expires:0};if((n=window.localStorage)!=null&&n.getItem(h)&&(l=JSON.parse(window.localStorage.getItem(h)||"")),l.value&&l.expires>Date.now()){r=l.value,o&&l.value!=o&&(r=o,this.updateLocalStorage(r)),this.value=r,this._options.needBff&&this.updateOest();return}i&&(r=i,o&&i!=o&&(r=o)),r=r||this.generateUuid(),this.updateLocalStorage(r),this.value=r,this._options.needBff&&this.updateOest()}catch(i){console.error("Error parsing JSON from localStorage:",i)}}getValue(){return s(this.value)}updateOest(){const{bffEnv:t,baseUrl:n=""}=this._options,i={};t&&(i["bff-env"]=t);const o=`${n}/bff-api/user-api/init_info/update_oneshot`;fetch(o,{method:"POST",headers:i}).then(r=>r.json()).catch(r=>{console.error("updateOest error:",r)})}}return(()=>{if(typeof window!="undefined")return window[p]||(window[p]=new d),window[p]})()}();
